<!DOCTYPE html>
<html>

<head>
    <title>ESP32 Pins</title>
    <style>
        body {
            background-color: linen;
            align-items: center;
        }

        h1 {
            color: maroon;
            margin-left: auto;
            margin-right: auto;
        }
    </style>
</head>

<body>
    <h1>ESP32 Pins :)</h1>
    <table border="1">
        <tr>
            <th>Name</th>
            <th>Pin</th>
            <th>Value</th>
        </tr>
        <tbody id="pinTableBody"></tbody>
    </table>
    <script>
        async function fetchData() {
            try {
                const response = await fetch('/data');
                const data = await response.json();
                const tbody = document.getElementById('pinTableBody');
                tbody.innerHTML = '';
                data.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `<td>${row.name}</td><td>${row.pin}</td><td>${row.value.toFixed(2)}</td>`;
                    tbody.appendChild(tr);
                });
            } catch (error) {
                console.error('Fetch error:', error);
            }
        }

        setInterval(fetchData, 200); // Fetch every 2 seconds
        window.onload = fetchData;
    </script>
</body>

</html>